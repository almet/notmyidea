<!DOCTYPE html>
<html lang="fr">
    <head>
        <title>
uMap - Alexis MÃ©taireau        </title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet"
              href="https://blog.notmyidea.org/theme/css/main.css?v2"
              type="text/css" />
        <link href="https://blog.notmyidea.org/feeds/all.atom.xml"
              type="application/atom+xml"
              rel="alternate"
              title="Alexis MÃ©taireau ATOM Feed" />
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
    </head>
    <body>
        <div id="content">
            <section id="links">
                <ul>
                            <li>
                                <a class="main" href="/">Alexis MÃ©taireau</a>
                            </li>
                        <li>
                            <a class=""
                               href="https://blog.notmyidea.org/journal/index.html">Journal</a>
                        </li>
                        <li>
                            <a class=""
                               href="https://blog.notmyidea.org/code/">Code, etc.</a>
                        </li>
                        <li>
                            <a class=""
                               href="https://blog.notmyidea.org/weeknotes/">Notes hebdo</a>
                        </li>
                        <li>
                            <a class=""
                               href="https://blog.notmyidea.org/lectures/">Lectures</a>
                        </li>
                        <li>
                            <a class=""
                               href="https://blog.notmyidea.org/projets.html">Projets</a>
                        </li>
                </ul>
            </section>
  <header>
    <h1 class="post-title">uMap</h1>
      <div>
â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘        50% (87h / 175 prÃ©vues)
      </div>
      <ul>
        <li>87h rÃ©munÃ©rÃ©es</li>
        <li>4h bÃ©nÃ©voles</li>
      </ul>
  </header>
  <article>
    <div id="vis"></div>
    <h2 id="mercredi-06-decembre-2023">ğŸ—“ï¸ mercredi 06 dÃ©cembre&nbsp;2023</h2>
<p>J&#8217;ai terminÃ© de faire quelques lÃ©gers changements dans la documentation, avant de me plonger dans le code javascript et de commencer Ã  faire du&nbsp;refactoring.</p>
<p>J&#8217;ai passÃ© du temps Ã  comprendre comment avoir cÃ´te Ã  cÃ´te des modules <span class="caps">ES6</span> et du code de type Â« script Â». J&#8217;ai ensuite commencÃ© Ã  crÃ©er des modules javascript en charge de la sauvegarde des donnÃ©es. En tirant les fils je me rends compte qu&#8217;il va sans doute falloir que je repasse sur le code qui s&#8217;occupe des requÃªtes <span class="caps">XHR</span> Ã  l&#8217;ancienne, pour le remplacer par de&nbsp;l&#8217;async/await.</p>
<p>J&#8217;avais oubliÃ© Ã  quel point faire des requÃªtes depuis le navigateur Ã©tait compliquÃ© Ã  l&#8217;Ã©poque&nbsp;!</p>
<h2 id="mardi-05-decembre-2023">ğŸ—“ï¸ mardi 05 dÃ©cembre&nbsp;2023</h2>
<p>J&#8217;ai mis Ã  plat ce que j&#8217;ai appris ces derniÃ¨res semaines sur le projet, pour pouvoir dÃ©cider vers oÃ¹ aller pour la suite des&nbsp;Ã©vÃ¨nements.</p>
<p>Une discussion avec Yohan me fait pencher vers la piste que je mettais de cÃ´tÃ© Ã  cause des changements qui sont nÃ©cessaires cÃ´tÃ© client: les&nbsp;CRDTs.</p>
<h2 id="mercredi-29-novembre-2023">ğŸ—“ï¸ mercredi 29 novembre&nbsp;2023</h2>
<p>J&#8217;ai passÃ© du temps sur la <span class="caps">PR</span> du merge optimiste, pour essayer de changer le fonctionnement qui passe actuellement par la modification des champs de formulaires envoyÃ©s, ce que je ne trouve pas trÃ¨s&nbsp;clean.</p>
<p>Le travail pour faire autrement me semble trop important pour le moment, on accepte la <span class="caps">PR</span> telle quelle, avec l&#8217;idÃ©e de passer par une <span class="caps">API</span> plus tard, avec la refonte avec <span class="caps">DRF</span>.</p>
<p>J&#8217;ai aussi travaillÃ© sur la&nbsp;documentation.</p>
<h2 id="mardi-28-novembre-2023">ğŸ—“ï¸ mardi 28 novembre&nbsp;2023</h2>
<p>Travail de projection pour NLNet, puis rÃ©union l&#8217;aprÃ¨s-midi. J&#8217;ai ensuite repris les recherches pour affiner l&#8217;utilisation des&nbsp;CRDTs.</p>
<h2 id="lundi-27-novembre-2023">ğŸ—“ï¸ lundi 27 novembre&nbsp;2023</h2>
<p>MatinÃ©e passÃ©e Ã  organiser ma semaine, Ã  participer a la prÃ©sentation de NLNet (trÃ¨s bon accueil, et clarifications utiles), puis Ã  faire un petit tour de uMap cÃ´tÃ© front avec&nbsp;Yohan.</p>
<p>L&#8217;aprÃ¨s-midi j&#8217;ai commencÃ© Ã  intÃ©grer les notes que j&#8217;ai prises sur le cÃ´tÃ© <span class="caps">JS</span> Ã  la documentation actuelle, et j&#8217;en ai profitÃ© pour refaire un tour sur la documentation actuelle pour la simplifier et la&nbsp;clarifier.</p>
<h2 id="vendredi-24-novembre-2023">ğŸ—“ï¸ vendredi 24 novembre&nbsp;2023</h2>
<p>RÃ©union d&#8217;avancement et point avec David et Yohan pour prÃ©parer la suite concernant&nbsp;NLNet.</p>
<p>Je suis content d&#8217;avoir prÃ©parÃ© le point, et je mesure l&#8217;importance donnÃ©e aux personnes dans les&nbsp;process.</p>
<h2 id="jeudi-23-novembre-2023">ğŸ—“ï¸ jeudi 23 novembre&nbsp;2023</h2>
<p>J&#8217;ai passÃ© du temps pour faire passer les tests dans le <span class="caps">CI</span>, et rÃ©solu quelques problÃ¨mes au&nbsp;passage.</p>
<h2 id="mercredi-22-novembre-2023">ğŸ—“ï¸ mercredi 22 novembre&nbsp;2023</h2>
<p>J&#8217;ai explorÃ© l&#8217;utilisation de Websockets pour le transport, entre autre sa consommation mÃ©moire, il semblerait que ce soit tout Ã  fait acceptable (1gb de mÃ©moire permet de gÃ©rer 1500 connexions&nbsp;concurrentes).</p>
<p>WebRTC n&#8217;est <a href="https://gitlab.torproject.org/legacy/trac/-/issues/8178">actuellement pas supportÃ© par Tor Browser </a>(<a href="https://gitlab.torproject.org/tpo/applications/tor-browser/-/issues/41021">pour le moment</a>), donc j&#8217;imagine que c&#8217;est une fausse&nbsp;piste.</p>
<p>J&#8217;ai repassÃ© un bon coup sur la <span class="caps">PR</span> du merge optimiste. Je suis content du rÃ©sultat: le code et des tests me semblent plus lisibles et&nbsp;comprÃ©hensibles.</p>
<p>L&#8217;aprÃ¨s-midi Ã  Ã©tÃ© passÃ©e avec Yohan qui m&#8217;a fait un tour du frontend. J&#8217;en ai profitÃ© pour prendre des notes que je pense publier dans la documentation. C&#8217;Ã©tait trÃ¨s utile d&#8217;avoir ses explications, le code n&#8217;est pas si simple Ã  prendre en&nbsp;main.</p>
<h2 id="mardi-21-novembre-2023">ğŸ—“ï¸ mardi 21 novembre&nbsp;2023</h2>
<p>Une matinÃ©e passÃ©e Ã  la fois Ã  prÃ©parer la semaine et Ã  rÃ©diger un rÃ©sumÃ© de ce que j&#8217;ai fait la semaine derniÃ¨re.
J&#8217;ai passÃ© un peu plus de temps Ã  comprendre en profondeur le code de merge de la <span class="caps">PR</span> de Biondi biondo, pour pouvoir l&#8217;expliquer dans un article de&nbsp;blog.</p>
<p>L&#8217;aprÃ¨s-midi j&#8217;ai participÃ© Ã  la weekly et lu l&#8217;article de blog de Figma qui explique leur approche pour implementer du temps&nbsp;rÃ©el.</p>
<p>J&#8217;avance petit Ã  petite sur la piste d&#8217;utiliser un <span class="caps">CRDT</span> &#8220;maison&#8221;, voire pas de <span class="caps">CRDT</span> du tout, en fonction de nos besoins rÃ©els. Un <span class="caps">CRDT</span> nous permettrait d&#8217;avoir plusieurs personnes qui travaillent en mÃªme temps sur une mÃªme feature (au sens GeoJSON), mais je ne sais pas encore si c&#8217;est un cas d&#8217;usage&nbsp;rÃ©el.</p>
<h2 id="samedi-18-novembre-2023">ğŸ—“ï¸ samedi 18 novembre&nbsp;2023</h2>
<p>J&#8217;ai passÃ© un peu de temps Ã  intÃ©grer l&#8217;intÃ©gration continue de Github. Je pensais que ce serait rapide mais je ne devais pas Ãªtre trÃ¨s&nbsp;rÃ©veillÃ©â€¦</p>
<h2 id="vendredi-17-novembre-2023">ğŸ—“ï¸ vendredi 17 novembre&nbsp;2023</h2>
<p>J&#8217;ai passÃ© du temps pour essayer de comprendre comment utiliser SQLite en local Ã  l&#8217;intÃ©rieur d&#8217;un navigateur, en utilisant <a href="https://vlcn.io/docs/cr-sqlite/intro">cr-sqlite</a>. J&#8217;ai un prototype qui fonctionne Ã  peu prÃ¨s et qui permet de rÃ©cupÃ©rer les Ã©ditions en local pour les synchroniser avec une autre base&nbsp;SQLite.</p>
<p>Fait un point avec l&#8217;Ã©quipe sur l&#8217;avancement gÃ©nÃ©ral&nbsp;l&#8217;aprÃ¨s-midi.</p>
<p>Ensuite continuÃ© Ã  creuser sur l&#8217;utilisation de SQLite avec&nbsp;cr-sqlite.</p>
<h2 id="mardi-14-novembre-2023">ğŸ—“ï¸ mardi 14 novembre&nbsp;2023</h2>
<p>Une matinÃ©e passÃ©e avec Yohan pour Ã  la fois <a href="https://github.com/umap-project/umap/pull/772/">avancer sur la <span class="caps">PR</span> pour merger des conflits simples</a>. On a passÃ© le code en revue et fait quelques changements cosmÃ©tiques qui devraient aider Ã  la comprÃ©hension&nbsp;gÃ©nÃ©rale.</p>
<p>La deuxiÃ¨me partie de la matinÃ©e Ã  Ã©tÃ© utilisÃ©e pour discuter des dÃ©couvertes et des questions que je me pose quand Ã  comment faire pour ajouter ces fonctions de collaboration temps&nbsp;rÃ©el.</p>
<p>Plusieurs trucs Ã  noter :
- Il est possible de challenger l&#8217;utilisation de geoJSON pour le stockage des donnÃ©es. On a parlÃ© entre autres de pmtiles et de&nbsp;sqlite.</p>
<p>J&#8217;ai passÃ© un dÃ©but d&#8217;aprÃ¨s-midi Ã  installer mon environnement de travail sur Linux, puis j&#8217;ai :
- terminÃ© de rebaser la pull request pour faire un merge optimiste.
- amÃ©liorÃ© la vitesse d&#8217;execution des&nbsp;tests</p>
<p>DÃ©couvertes :
- https://www.geopackage.org/
-&nbsp;https://vlcn.io/docs/js/reactivity</p>
<h2 id="lundi-13-novembre-2023">ğŸ—“ï¸ lundi 13 novembre&nbsp;2023</h2>
<p>J&#8217;ai cherchÃ© Ã  comprendre comment il serait possible de s&#8217;intÃ©grer avec Leaflet. Je connais assez mal l&#8217;Ã©cosystÃ¨me donc j&#8217;ai cherchÃ© les plugins autour de stockage de donnÃ©es et de la&nbsp;synchronisation.</p>
<p>Beaucoup de clicks, de lecture et de comprÃ©hension des contours de l&#8217;Ã©cosystÃ¨me <span class="caps">SIG</span>, et de l&#8217;Ã©cosystÃ¨me de&nbsp;Leaflet.</p>
<p>J&#8217;ai aussi creusÃ© autour des <span class="caps">SSE</span> et de WebRTC, question de comprendre les limites et avantages de&nbsp;chacun.</p>
<h2 id="mardi-07-novembre-2023">ğŸ—“ï¸ mardi 07 novembre&nbsp;2023</h2>
<ul>
<li>Lu la documentation&nbsp;d&#8217;automerge</li>
<li>CommencÃ© Ã  faire un prototype pour voir le fonctionnement d&#8217;automerge en&nbsp;python</li>
<li>InstallÃ© les dÃ©pendances rust, compilÃ©&nbsp;automerge</li>
<li>RÃ©union discussion avec Yohan sur mes questions et sur les diffÃ©rentes&nbsp;pistes</li>
</ul>
<h2 id="lundi-06-novembre-2023">ğŸ—“ï¸ lundi 06 novembre&nbsp;2023</h2>
<ul>
<li>Lu le code qui est dans uMap actuellement pour comprendre le fonctionnement&nbsp;actuel</li>
<li>CommencÃ© Ã  rÃ©diger un document avec les diffÃ©rentes options pour faire de la&nbsp;synchro</li>
<li>Fais des recherches sur les diffÃ©rentes options pour faire de la&nbsp;synchro</li>
</ul>
  </article>
  <script>
    const spec = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "width": 500,
      "height": 200,
      "data": 
        {
          "name": "table",
          "values": [
            {"date": "2023-12-06", "series": "RÃ©munÃ©rÃ©", "count": 6},
            {"date": "2023-12-06", "series": "BÃ©nÃ©vole", "count": 0},
            {"date": "2023-12-05", "series": "RÃ©munÃ©rÃ©", "count": 8},
            {"date": "2023-12-05", "series": "BÃ©nÃ©vole", "count": 0},
            {"date": "2023-11-29", "series": "RÃ©munÃ©rÃ©", "count": 5},
            {"date": "2023-11-29", "series": "BÃ©nÃ©vole", "count": 0},
            {"date": "2023-11-28", "series": "RÃ©munÃ©rÃ©", "count": 4},
            {"date": "2023-11-28", "series": "BÃ©nÃ©vole", "count": 0},
            {"date": "2023-11-27", "series": "RÃ©munÃ©rÃ©", "count": 8},
            {"date": "2023-11-27", "series": "BÃ©nÃ©vole", "count": 0},
            {"date": "2023-11-24", "series": "RÃ©munÃ©rÃ©", "count": 2},
            {"date": "2023-11-24", "series": "BÃ©nÃ©vole", "count": 0},
            {"date": "2023-11-23", "series": "RÃ©munÃ©rÃ©", "count": 3},
            {"date": "2023-11-23", "series": "BÃ©nÃ©vole", "count": 0},
            {"date": "2023-11-22", "series": "RÃ©munÃ©rÃ©", "count": 9},
            {"date": "2023-11-22", "series": "BÃ©nÃ©vole", "count": 0},
            {"date": "2023-11-21", "series": "RÃ©munÃ©rÃ©", "count": 8},
            {"date": "2023-11-21", "series": "BÃ©nÃ©vole", "count": 0},
            {"date": "2023-11-18", "series": "RÃ©munÃ©rÃ©", "count": 0},
            {"date": "2023-11-18", "series": "BÃ©nÃ©vole", "count": 4},
            {"date": "2023-11-17", "series": "RÃ©munÃ©rÃ©", "count": 6},
            {"date": "2023-11-17", "series": "BÃ©nÃ©vole", "count": 0},
            {"date": "2023-11-14", "series": "RÃ©munÃ©rÃ©", "count": 8},
            {"date": "2023-11-14", "series": "BÃ©nÃ©vole", "count": 0},
            {"date": "2023-11-13", "series": "RÃ©munÃ©rÃ©", "count": 8},
            {"date": "2023-11-13", "series": "BÃ©nÃ©vole", "count": 0},
            {"date": "2023-11-07", "series": "RÃ©munÃ©rÃ©", "count": 8},
            {"date": "2023-11-07", "series": "BÃ©nÃ©vole", "count": 0},
            {"date": "2023-11-06", "series": "RÃ©munÃ©rÃ©", "count": 4},
            {"date": "2023-11-06", "series": "BÃ©nÃ©vole", "count": 0},
          ]
        }
      ,
      "mark": "bar",
      "encoding": {
        "x": {
          "timeUnit": {"unit": "dayofyear", "step": 1},
          "field": "date",
          "axis": {"format": "%d/%m"},
          "title": "Date",
          "step": 1,
        },
        "y": {
          "aggregate": "sum",
          "field": "count",
          "title": "Heures",
        },
        "color": {
          "field": "series",
          "scale": {
            "domain": ["BÃ©nÃ©vole", "RÃ©munÃ©rÃ©"],
            "range": ["#e7ba52", "#1f77b4"]
          },
          "title": "Type d'heures"
        }
      }
    };

  	vegaEmbed("#vis", spec)
    	// result.view provides access to the Vega View API
      .then(result => console.log(result))
      .catch(console.warn);
  </script>
            <footer>
                <a id="feed" href="/feeds/all.atom.xml">
                    <img alt="RSS Logo" src="/theme/rss.svg" />
                </a>
            </footer>
        </div>
    </body>
</html>