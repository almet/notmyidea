<!DOCTYPE html>
<html lang="en">
  <head>
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />

    <title>G√©n√©ration de formulaires, geolocalis√©s ? - Alexis - Carnets en ligne</title>

    <meta charset="utf-8" />
    <link href="https://blog.notmyidea.org/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Alexis - Carnets en ligne Full Atom Feed" />
    <link rel="stylesheet" href="https://blog.notmyidea.org/theme/css/poole.css"/>
    <link rel="stylesheet" href="https://blog.notmyidea.org/theme/css/syntax.css"/>
    <link rel="stylesheet" href="https://blog.notmyidea.org/theme/css/lanyon.css"/>
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">
    <link rel="stylesheet" href="https://blog.notmyidea.org/theme/css/styles.css"/>



<style>

h1 {
    font-family: "Avant Garde", Avantgarde, "Century Gothic", CenturyGothic, "AppleGothic", sans-serif;
    padding: 80px 50px;
    text-align: center;
    text-transform: uppercase;
    text-rendering: optimizeLegibility;
    color: #202020;
    letter-spacing: .1em;
    text-shadow:
        -1px -1px 1px #111,
        2px 2px 1px #eaeaea;
}

#main {
    text-align: justify;
    text-justify: inter-word;
}
#main h1 {
    padding: 10px;
}

.post-headline {
    padding: 15px;
}
</style>
  </head>

  <body>
<!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">
<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <div class="profile">
      <img src="https://blog.notmyidea.org/theme/img/profile.png"/>
    </div>
  </div>

  <nav class="sidebar-nav">
  <a class="sidebar-nav-item" href="/">Articles</a>

  <a class="sidebar-nav-item" href="https://www.vieuxsinge.com">Brasserie du Vieux Singe</a>
  <a class="sidebar-nav-item" href="http://blog.notmyidea.org/pages/about.html">A propos</a>
  <a class="sidebar-nav-item" href="https://twitter.com/ametaireau">Messages courts</a>
  <a class="sidebar-nav-item" href="https://github.com/almet">Code</a>
  </nav>
</div>    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="https://blog.notmyidea.org/" title="Home">Alexis - Carnets en ligne</a>
          </h3>
        </div>
      </div>

      <div class="container content">
<div id="main" class="posts">
<h1 class="post-title">G√©n√©ration de formulaires, geolocalis√©s ?</h1>
<span class="post-date">02 avril 2012, dans <a class="no-color" href="category/technologie.html">Technologie</a></span>
<img id="illustration" src="" />

<div class="post article">
    <div id="toc_container">
      <div class="toc">
<ul>
<li><a href="#generation-de-formulaires-geolocalises">G√©n√©ration de formulaires, geolocalis√©s ?</a><ul>
<li><a href="#quelques-cas-dutilisation">Quelques cas d'utilisation</a><ul>
<li><a href="#un-backend-sig-simple-a-utiliser">Un backend SIG simple √† utiliser</a></li>
<li><a href="#un-outil-de-visualisation">Un outil de visualisation</a></li>
<li><a href="#un-service-generique-pour-gerer-les-formulaires">Un service g√©n√©rique pour g√©rer les formulaires</a></li>
</ul>
</li>
<li><a href="#ca-nexiste-pas-deja-tout-ca">√áa n'existe pas d√©j√† tout √ßa ?</a></li>
<li><a href="#on-est-parti-33">On est parti ?!</a></li>
</ul>
</li>
</ul>
</div>

      </div>
    <h1>üåü</h1>
    
<p>On a un plan. Un "truc de ouf".</p>
<p>√Ä plusieurs reprises, des amis m'ont demand√© de leur coder la m√™me
chose, √† quelques d√©tails pr√®s: une page web avec un formulaire qui
permettrait de soumettre des informations g√©ographiques, li√© √† une carte
et des mani√®res de filtrer l'information.</p>
<p>L'id√©e fait son bout de chemin, et je commence √† penser qu'on peut m√™me
avoir quelque chose de vraiment flexible et utile. J'ai nomm√© le projet
<em>carto-forms</em> pour l'instant (mais c'est uniquement un nom de code).</p>
<p>Pour r√©sumer: et si on avait un moyen de construire des formulaires, un
peu comme Google forms, mais avec des informations g√©ographiques en
plus?</p>
<p>Si vous ne connaissez pas Google forms, il s'agit d'une interface simple
d'utilisation pour g√©n√©rer des formulaires et r√©cup√©rer des informations
depuis ces derniers.</p>
<p>Google forms est un super outil mais √† mon avis manque deux choses
importantes: premi√®rement, il s'agit d'un outil propri√©taire (oui, on
peut aussi dire privateur) et il n'est donc pas possible de le hacker un
peu pour le faire devenir ce qu'on souhaite, ni l'installer sur notre
propre serveur. Deuxi√®mement, il ne sait pas vraiment fonctionner avec
des informations g√©ographiques, et il n'y √† pas d'autre moyen de filtrer
les informations que l'utilisation de leur syst√®me de feuilles de
calcul.</p>
<p>Apr√®s avoir r√©fl√©chi un petit peu √† √ßa, j'ai contact√©
<a href="http://blog.mathieu-leplatre.info/">Mathieu</a> et les anciens coll√®gues
de chez <a href="http://makina-corpus.com">Makina Corpus</a>, puisque les projets
libres √† base de carto sont √† m√™me de les int√©resser.</p>
<p>Imaginez le cas suivant:</p>
<ol>
<li>Dans une "mapping party", on choisit un sujet particulier √†
    cartographier et on design un formulaire (liste des champs (tags) a
    remplir + description + le type d'information) ;</li>
<li>Sur place, les utilisateurs remplissent les champs du formulaire
    avec ce qu'ils voient. Les champs g√©olocalis√©s peuvent √™tre remplis
    automatiquement avec la g√©olocalisation du t√©l√©phone ;</li>
<li>√Ä la fin de la journ√©e, il est possible de voir une carte des
    contributions, avec le formulaire choisi ;</li>
<li>Un script peut importer les r√©sultats et les publier vers
    OpenStreetMap.</li>
</ol>
<h2 id="quelques-cas-dutilisation">Quelques cas d'utilisation</h2>
<p>J'arrive √† imaginer diff√©rents cas d'utilisation pour cet outil. Le
premier est celui que j'ai approximativement d√©crit plus haut: la
g√©n√©ration de cartes de mani√®re collaborative, avec des filtres √†
facettes. Voici un flux d'utilisation g√©n√©ral:</p>
<ul>
<li>
<p>Un "administrateur" se rend sur le site web et cr√©e un nouveau
    formulaire pour l'ensemble des √©v√®nements alternatifs. Il cr√©e les
    champs suivants:</p>
<ul>
<li>Nom: le champ qui contient le nom de l'√©v√®nement.</li>
<li>Cat√©gorie: la cat√©gorie de l'√©v√®nement (marche, concert,
    manifestation‚Ä¶). Il peut s'agir d'un champ √† multiples
    occurrences.</li>
<li>Le lieu de l'√©v√®nement. Celui-ci peut √™tre donn√© soit par une
    adresse soit en s√©lectionnant un point sur une carte.</li>
<li>Date: la date de l'√©v√®nement (un "date picker" peut permettre
    cela facilement)</li>
</ul>
<p>Chaque champ dans le formulaire a des informations s√©mantiques
associ√©es (oui/non, multiple s√©lection, date, heure, champ g√©ocod√©,
s√©lection carto, etc.)</p>
</li>
<li>
<p>Une fois termin√©, le formulaire est g√©n√©r√© et une URL permet d'y
    acc√©der. (par exemple <a href="http://forms.notmyidea.org/alternatives">http://forms.notmyidea.org/alternatives</a>).</p>
</li>
<li>
<p>Une API REST permet √† d'autres applications d'acc√©der aux
    informations et d'en ajouter / modifier de nouvelles.</p>
</li>
<li>
<p>Il est maintenant possible de donner l'URL √† qui voudra en faire bon
    usage. N'importe qui peut ajouter des informations. On peut
    √©galement imaginer une mani√®re de mod√©rer les modifications si
    besoin est.</p>
</li>
<li>
<p>Bien sur, la derni√®re phase est la plus int√©ressante: il est
    possible de filtrer les informations par lieu, cat√©gorie ou date, le
    tout soit via une API REST, soit via une jolie carte et quelques
    contr√¥les bien plac√©s, dans le navigateur.</p>
</li>
</ul>
<p>Vous avez d√ª remarquer que le processus de cr√©ation d'un formulaire est
volontairement tr√®s simple. L'id√©e est que n'importe qui puisse cr√©er
des cartes facilement, en quelques clics. Si une API bien pens√©e suit,
on peut imaginer faire de la validation cot√© serveur et m√™me faire des
applications pour t√©l√©phone assez simplement.</p>
<p>Pour aller un peu plus loin, si on arrive √† penser un format de
description pour le formulaire, il sera possible de construire les
formulaires de mani√®re automatis√©e sur diff√©rentes plateformes et
√©galement sur des clients g√©n√©riques.</p>
<p>On imagine pas mal d'exemples pour ce projet: des points de recyclage,
les endroits accessibles (pour fauteuils roulants etc.), identification
des arbres, bons coins √† champignons, recensement des esp√®ces en voie de
disparition (l'aigle de Bonelli est actuellement suivi en utilisant une
feuille de calcul partag√©e !), suivi des esp√®ces dangereuses (le frelon
asiatique par exemple), cartographier les points d'affichage
publicitaires, participation citoyenne (graffitis, nids de poule, voir
<a href="http://fixmystreet.ca">http://fixmystreet.ca</a>), geocaching, trajectoires (randonn√©es,
coureurs, cyclistes)‚Ä¶</p>
<p>Voici quelques exemples o√π ce projet pourrait √™tre utile (la liste n'est
pas exhaustive):</p>
<h3 id="un-backend-sig-simple-a-utiliser">Un backend SIG simple √† utiliser</h3>
<p>Disons que vous √™tes d√©veloppeur mobile. Vous ne voulez pas vous
encombrer avec PostGIS ou √©crire du code sp√©cifique pour r√©cup√©rer et
ins√©rer des donn√©es SIG! Vous avez besoin de <em>Carto-Forms</em>! Une API
simple vous aide √† penser vos mod√®les et vos formulaires, et cette m√™me
API vous permet d'ins√©rer et de r√©cup√©rer des donn√©es. Vous pouvez vous
concentrer sur votre application et non pas sur la mani√®re dont les
donn√©es g√©ographiques sont stock√©es et g√©r√©es.</p>
<p>En d'autres termes, vous faites une distinction entre le stockage des
informations et leur affichage.</p>
<p>Si vous √™tes un d√©veloppeur django, plomino, drupal etc. vous pouvez
d√©velopper un module pour "plugger" vos mod√®les et votre interface
utilisateur avec celle de <em>Carto-Forms</em>. De cette mani√®re, il est
possible d'exposer les formulaires aux utilisateurs de vos backoffices.
De la m√™me mani√®re, il est possible d'√©crire des widgets qui consomment
des donn√©es et les affichent (en utilisant par exemple une biblioth√®que
javascript de webmapping).</p>
<h3 id="un-outil-de-visualisation">Un outil de visualisation</h3>
<p>Puisque les donn√©es peuvent √™tre propos√©es de mani√®re automatis√©e en
utilisant l'API, vous pouvez utiliser la page de r√©sultat de Carto-forms
comme un outil de visualisation.</p>
<p>Il est possible d'explorer mon jeu de donn√©es en utilisant des filtres
sur chacun des champs. La recherche √† facettes peut √™tre une id√©e pour
faciliter ce filtrage. Une carte affiche le r√©sultat. Vous avez
l'impressoin d'√™tre en face d'un syst√®me d'aide √† la d√©cision !</p>
<p>√âvidemment, il est possible de t√©l√©charger les donn√©es brutes (geojson,
xml). Id√©alement, le mieux serait d'obtenir ces donn√©es filtr√©es
directement depuis une API Web, et un lien permet de partager la page
avec l'√©tat des filtres et le niveau de zoom / la localisation de la
carte.</p>
<h3 id="un-service-generique-pour-gerer-les-formulaires">Un service g√©n√©rique pour g√©rer les formulaires</h3>
<p>Si vous souhaitez g√©n√©rer un fichier de configuration (ou ce que vous
voulez, messages emails, ‚Ä¶) vous aurez besoin d'un formulaire et d'un
template pour injecter les donn√©es propos√©es par les utilisateurs et
r√©cup√©rer un r√©sultat.</p>
<p>Un service de gestion des formulaires pourrait √™tre utile pour cr√©er des
formulaires de mani√®re automatique et r√©cup√©rer les donn√©es "nettoy√©es"
et "valid√©es".</p>
<p>On peut imaginer par exemple l'utilisation d'un syst√®me de templates
externe reposant sur <em>carto-forms</em>. Celui-ci "parserait" le contenu des
templates et pourrait le lier aux informations ajout√©es par les
utilisateurs via un formulaire.</p>
<p>Pour ce cas particulier, il n'y a pas besoin d'informations
g√©ographiques (SIG). Il s'agit quasiment du service propos√©
actuellement par Google forms.</p>
<h2 id="ca-nexiste-pas-deja-tout-ca">√áa n'existe pas d√©j√† tout √ßa ?</h2>
<p>Bien sur, il y a Google forms, qui vous permet de faire ce genre de
choses, mais comme je l'ai pr√©cis√© plus haut, il ne s'agit pas
exactement de la m√™me chose.</p>
<p>Nous avons d√©couvert <a href="https://webform.com">https://webform.com</a> qui permet de cr√©er des
formulaires avec un syst√®me de drag'n'drop. J'adorerais reproduire
quelque chose de similaire pour l'interface utilisateur. Par contre ce
projet ne g√®re pas les appels via API et les informations de
g√©olocalisation ‚Ä¶</p>
<p>L'id√©e de <a href="http://thoth.io">http://thoth.io</a> est √©galement assez sympathique: une api
tr√®s simple pour stocker et r√©cup√©rer des donn√©es. En plus de √ßa,
<em>carto-forms</em> proposerait de la validation de donn√©es et proposerait un
support des points SIG (point, ligne, polygone).</p>
<p><a href="http://mapbox.com">http://mapbox.com</a> fait √©galement un superbe travail autour de la
cartographie, mais ne prends pas en compte le cot√© auto-g√©n√©ration de
formulaires‚Ä¶</p>
<h2 id="on-est-parti-33">On est parti ?!</h2>
<p>Comme vous avez pu vous en rendre compte, il ne s'agit pas d'un probl√®me
outrageusement complexe. On a pas mal discut√© avec Mathieu, √† propos de
ce qu'on souhaite faire et du comment. Il se trouve qu'on peut s√ªrement
s'en sortir avec une solution √©l√©gante sans trop de probl√®mes. Mathieu
est habitu√© √† travailler autour des projets de SIG (ce qui est parfait
parce que ce n'est pas mon cas) et conna√Æt son sujet. Une bonne
opportunit√© d'apprendre!</p>
<p>On sera tous les deux √† <a href="http://rencontres.django-fr.org">Djangocong</a> le
14 et 15 Avril, et on pr√©voit une session de <em>temp√™te de cerveau</em> et un
sprint sur ce projet. Si vous √™tes dans le coin et que vous souhaitez
discuter ou nous filer un coup de patte, n'h√©sitez pas!</p>
<p>On ne sait pas encore si on utilisera django ou quelque chose d'autre.
On a pens√© un peu √† CouchDB, son syst√®me de couchapps et geocouch, mais
rien n'est encore grav√© dans le marbre ! N'h√©sitez pas √† proposer vos
solutions ou suggestions.</p>
<p>Voici le document etherpad sur lequel on a travaill√© jusqu'√† maintenant:
<a href="http://framapad.org/carto-forms">http://framapad.org/carto-forms</a>. N'h√©sitez pas √† l'√©diter et √† ajouter
vos commentaires, c'est son objectif!</p>
<p>Merci √† <a href="http://sneakernet.fr/">Arnaud</a> pour la relecture et la
correction de quelques typos dans le texte :)</p>
  </div>
</div>
      </div>

      <label for="sidebar-checkbox" class="sidebar-toggle"></label>

      <script>
        (function(document) {
          var i = 0;
          // snip empty header rows since markdown can't
          var rows = document.querySelectorAll('tr');
          for(i=0; i<rows.length; i++) {
            var ths = rows[i].querySelectorAll('th');
            var rowlen = rows[i].children.length;
            if (ths.length > 0 && ths.length === rowlen) {
              rows[i].remove();
            }
          }
        })(document);
      </script>

      <script>
        /* Lanyon & Poole are Copyright (c) 2014 Mark Otto. Adapted to Pelican 20141223 and extended a bit by @thomaswilley */
        (function(document) {
          var toggle = document.querySelector('.sidebar-toggle');
          var sidebar = document.querySelector('#sidebar');
          var checkbox = document.querySelector('#sidebar-checkbox');
          document.addEventListener('click', function(e) {
            var target = e.target;
            if(!checkbox.checked ||
            sidebar.contains(target) ||
            (target === checkbox || target === toggle)) return;
            checkbox.checked = false;
            }, false);
            })(document);
      </script>
      <!-- Piwik -->
      <script type="text/javascript">
        var _paq = _paq || [];
        _paq.push(['trackPageView']);
        _paq.push(['enableLinkTracking']);
        (function() {
          var u="//tracker.notmyidea.org/";
          _paq.push(['setTrackerUrl', u+'piwik.php']);
          _paq.push(['setSiteId', 3]);
          var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
          g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
        })();
      </script>
      <noscript><p><img src="//tracker.notmyidea.org/piwik.php?idsite=3" style="border:0;" alt="" /></p></noscript>
      <!-- End Piwik Code -->
     </div>
  </body>
</html>